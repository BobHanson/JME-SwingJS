<?xml version="1.0"?>
<!--
 BH 2018.08.12

 - requires tools/ant-contrib.jar
  
 - creates the site/ directory if it does not exist
 - unzips swingjs/SwingJS-site.zip into site/
 - copies non-java resources from html/ into site/
 - copies non-java resources from resources/ into site/swingjs/j2s
 
-->

<project name="swingjs-project" default="tosite" basedir="."
 xmlns:if="ant:if"
    xmlns:unless="ant:unless">
	
  <target name="tosite">
  	  	
  	<!-- input directories -->
  	
  	<!-- location of ant-contrib.jar -->
  	<property name="tools.dir" value = "tools" />

 	<!-- SwingjS_site zip file (could be varied if versioning is needed) -->
  	<property name="swingjs.zip" value="swingjs/SwingJS-site.zip" />
 
	<!-- output directories -->

  	<property name="site.dir" value="site" />
  	<property name="swingjs.dir" value="${site.dir}/swingjs" />
  	<property name="j2s.dir" value="${swingjs.dir}/j2s" />
  	<property name="html.dir" value="html" />
  	<property name="resources.dir" value="resources" />
  	<property name="openchemlib.dir" value="../openchemlib/site/swingjs/j2s" />
  	 
  	<!-- unzip SwingJS-site.zip 
  	
  	  we do this separately, as we want it done last 
  	
  	-->

  	<echo> Unzipping ${swingjs.zip} into ${site.dir} </echo>
  	<unzip src="${swingjs.zip}" dest="${site.dir}/" overwrite="true"/>  	

	<!-- transfer site-level resources -->

  	<echo> Copying ${html.dir} files into ${site.dir} </echo>
  	<copy failonerror="false" todir="${site.dir}">
      <fileset dir="${html.dir}">
      	<include name="**"/>
  	</fileset>
    </copy>

 	<!-- transfer resources -->
  	<echo> Copying ${openchemlib.dir} files into ${resources.dir} </echo>
  	<copy failonerror="false" todir="${resources.dir}">
        <fileset dir="${openchemlib.dir}" includes="
        	com/actelion/research/util/ColorHelper.js
        	com/actelion/research/util/SortedList.js
        	com/actelion/research/util/IntArrayComparator.js
        	com/actelion/research/gui/generic/GenericRectangle.js
        	com/actelion/research/gui/generic/GenericPoint.js
        	com/actelion/research/chem/coords/CoordinateInventor.js
        	com/actelion/research/chem/coords/InventorFragment.js
        	com/actelion/research/chem/coords/InventorDefaultTemplateList.js
        	com/actelion/research/chem/coords/InventorTemplate.js

        	com/actelion/research/chem/coords/InventorChain.js
        	com/actelion/research/chem/Molecule.js
        	com/actelion/research/chem/Canonizer.js
        	com/actelion/research/chem/AbstractDepictor.js
        	com/actelion/research/chem/SSSearcherWithIndex.js
        	com/actelion/research/chem/ExtendedMolecule.js
        	com/actelion/research/chem/RingCollection.js
        	com/actelion/research/chem/SSSearcher.js
        	com/actelion/research/chem/IDCodeParserWithoutCoordinateInvention.js
        	com/actelion/research/chem/AromaticityResolver.js
        	com/actelion/research/chem/SmilesParser.js
        	com/actelion/research/chem/MolfileParser.js
        	com/actelion/research/chem/MolfileCreator.js
        	com/actelion/research/chem/SVGDepictor.js
        	com/actelion/research/chem/StereoMolecule.js
        	com/actelion/research/chem/CanonizerMesoHelper.js
        	com/actelion/research/chem/CanonizerBaseValue.js
        	com/actelion/research/chem/DepictorTransformation.js
        	com/actelion/research/chem/CanonizerMesoHelper.ESRGroupFragmentMatrix.js
        	com/actelion/research/chem/Coordinates.js
        	com/actelion/research/chem/CanonizerBond.js
        	com/actelion/research/chem/CanonizerFragment.js
        	com/actelion/research/chem/IDCodeParser.js
        	com/actelion/research/chem/SmilesRange.js
        	com/actelion/research/chem/AbstractDepictor.DepictorLine.js

        	
        	com/actelion/research/gui/generic/GenericShape.js
           	com/actelion/research/util/Angle.js
        	com/actelion/research/chem/MesoFragmentBranch.js
        	

        	"/>	
    </copy>

  	<echo> Copying ${resources.dir} files into ${j2s.dir} </echo>
  	<copy failonerror="false" todir="${j2s.dir}">
      <fileset dir="${resources.dir}">
      	<include name="**"/>
   	  </fileset>
  </copy>
</target>
	

</project>
